*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --bg:       #F7F5F2;
  --surface:  #FFFFFF;
  --surface2: #F2F0ED;
  --surface3: #E8E5E0;
  --border:   #E2DDD7;
  --border2:  #C8C2BA;
  --text:     #1C1917;
  --text2:    #6B6560;
  --text3:    #A8A09A;
  --coral:    #D97D55;
  --coral-h:  #C46B44;
  --coral-bg: #FDF0E8;
  --coral-bd: #F0C4A8;
  --green:    #22C55E;
  --green-bg: #F0FDF4;
  --red:      #EF4444;
  --red-bg:   #FEF2F2;
  --blue:     #3B82F6;
  --orange:   #F97316;
  --grey:     #9CA3AF;
  --r-xs:4px; --r-s:8px; --r-m:12px; --r-l:20px; --r-xl:28px; --pill:9999px;
}

.hidden{display:none!important}

html,body{height:100%;overflow:hidden;background:var(--bg);color:var(--text);
  font-family:system-ui,-apple-system,"Segoe UI",sans-serif;font-size:14px;line-height:1.5}

/* ── Header ──────────────────────────────────────────────────────── */
#header{
  display:flex;align-items:center;gap:16px;padding:0 24px;height:52px;
  background:var(--surface);border-bottom:1px solid var(--border);
  flex-shrink:0;box-shadow:0 1px 3px rgba(0,0,0,0.05);
}
.logo{font-size:15px;font-weight:700;letter-spacing:-.4px;white-space:nowrap;flex-shrink:0}
.logo-accent{color:var(--coral)}

.tab-badge{background:var(--coral);color:#fff;font-size:10px;font-weight:700;
  min-width:16px;height:16px;border-radius:var(--pill);padding:0 4px;
  display:inline-flex;align-items:center;justify-content:center;margin-left:4px;vertical-align:middle}
.tab-badge.hidden{display:none}

.header-right{display:flex;align-items:center;gap:4px;margin-left:auto;flex-shrink:0}
.nav-link{background:none;border:none;color:var(--text2);padding:5px 12px;
  border-radius:var(--r-s);font-size:13px;font-weight:500;cursor:pointer;
  transition:all .15s;white-space:nowrap;font-family:inherit}
.nav-link:hover{color:var(--text);background:var(--surface2)}
.nav-link.active{color:var(--text);background:var(--surface2);font-weight:600}
.upload-status{font-size:12px;color:var(--text2);max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* ── Main ────────────────────────────────────────────────────────── */
#main{height:calc(100vh - 52px);overflow:hidden}
.tab-page{display:none;height:100%;width:100%}
.tab-page.active{display:flex;flex-direction:column;align-items:center}
/* Queue + Published: scrollable column */
#tab-queue.active,#tab-published.active{overflow-y:auto}
/* Create: each sub-view handles its own scroll */
#tab-create.active{overflow:hidden;position:relative}

/* ── CREATE TAB ──────────────────────────────────────────────────── */

/* All create views share this column-center pattern */
.tab-page.active#tab-create > * { width:100%; }

/* STEP 0 — Landing */
.create-landing{
  display:flex;flex-direction:column;align-items:center;
  justify-content:center;gap:24px;
  height:100%;overflow-y:auto;padding:40px 24px;
  max-width:640px;margin:0 auto;width:100%;
}

.create-hero{text-align:center}
.create-title{
  font-size:36px;font-weight:700;color:var(--text);
  line-height:1.2;letter-spacing:-.7px;margin-bottom:0;
}

/* Input bar — mirrors CrowdListen LandingInputBar */
.landing-bar{
  display:flex;align-items:center;gap:0;width:100%;
  background:var(--surface);border:1.5px solid var(--border);
  border-radius:var(--r-xl);box-shadow:0 2px 12px rgba(0,0,0,0.06);
  transition:box-shadow .2s,border-color .2s;overflow:hidden;
}
.landing-bar:focus-within{
  border-color:rgba(217,125,85,0.5);
  box-shadow:0 4px 20px rgba(217,125,85,0.12);
}
.landing-input{
  flex:1;background:transparent;border:none;outline:none;
  padding:16px 20px;font-size:16px;color:var(--text);font-family:inherit;
}
.landing-input::placeholder{color:var(--text3)}
.landing-submit{
  background:none;border:none;cursor:pointer;
  width:44px;height:44px;margin:6px;border-radius:var(--r-m);
  display:flex;align-items:center;justify-content:center;
  font-size:18px;color:var(--text3);transition:all .15s;flex-shrink:0;
}
.landing-submit:hover{background:var(--coral);color:#fff}

/* Quick chips */
.quick-chips{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.quick-chip{
  background:var(--surface);border:1px solid var(--border);
  color:var(--text2);border-radius:var(--r-xl);padding:8px 16px;
  font-size:13px;font-family:inherit;cursor:pointer;transition:all .15s;
}
.quick-chip:hover{border-color:var(--coral);color:var(--text);background:var(--coral-bg)}
.chip-upload:hover{border-color:var(--border2)}

/* STEP 1a — Clip browser */
.create-clips{
  display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden;
  align-self:stretch;
}
.clips-header{
  display:flex;align-items:center;gap:12px;flex-wrap:wrap;flex-shrink:0;
  padding:12px 20px;background:var(--surface);border-bottom:1px solid var(--border);
}
.back-btn{
  background:none;border:1px solid var(--border);border-radius:var(--r-s);
  color:var(--text2);padding:5px 12px;font-size:12px;font-family:inherit;
  cursor:pointer;transition:all .15s;white-space:nowrap;flex-shrink:0;
}
.back-btn:hover{border-color:var(--coral);color:var(--coral)}
.source-pills{display:flex;gap:5px;flex-wrap:wrap;flex:1}
.pill{background:var(--surface2);border:1px solid var(--border);color:var(--text2);
  border-radius:var(--pill);padding:4px 12px;font-size:12px;cursor:pointer;transition:all .15s}
.pill:hover{border-color:var(--coral);color:var(--text)}
.pill.active{background:var(--coral);border-color:var(--coral);color:#fff;font-weight:500}
.score-row{display:flex;align-items:center;gap:8px;flex-shrink:0}
.score-label{font-size:12px;color:var(--text2);white-space:nowrap}
.score-row input[type=range]{width:80px;accent-color:var(--coral)}

/* Clip grid */
.clip-grid{
  display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:10px;padding:16px 20px;overflow-y:auto;flex:1;
}

/* Grid-style clip card */
.clip-card{
  background:var(--surface);border:1.5px solid var(--border);border-radius:var(--r-m);
  padding:11px 12px;cursor:pointer;transition:all .18s;
  display:flex;flex-direction:column;gap:7px;
}
.clip-card:hover{border-color:var(--coral-bd);box-shadow:0 3px 10px rgba(217,125,85,0.12);transform:translateY(-1px)}
.clip-card.active{border-color:var(--coral);background:var(--coral-bg)}

.cc-top{display:flex;align-items:center;gap:5px;flex-wrap:wrap}
.score-badge{font-size:10px;font-weight:700;padding:2px 6px;border-radius:var(--r-xs);color:#fff}
.score-high{background:var(--red)}.score-mid{background:var(--orange)}.score-low{background:var(--grey)}
.source-tag{font-size:10px;padding:2px 7px;border-radius:var(--pill);
  background:var(--surface2);color:var(--text2);border:1px solid var(--border)}
.clip-ts{font-size:10px;color:var(--text3);margin-left:auto}
.cc-caption{font-size:12px;font-weight:600;color:var(--text);line-height:1.4;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.cc-visual{font-size:11px;color:var(--text2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* STEP 1b — Narration page */
.narration-page{
  display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden;
  align-self:stretch;
}
.narration-header{
  display:flex;align-items:center;gap:12px;flex-shrink:0;
  padding:12px 20px;background:var(--surface);border-bottom:1px solid var(--border);
}
.narration-title{font-size:14px;font-weight:600;color:var(--text);flex:1}
.narration-body{
  display:flex;gap:0;flex:1;overflow:hidden;
}
.narration-left{
  flex:1;display:flex;flex-direction:column;gap:14px;
  padding:20px 20px 20px 24px;overflow-y:auto;border-right:1px solid var(--border);
}
.narration-right{
  width:320px;flex-shrink:0;display:flex;flex-direction:column;gap:12px;
  padding:20px 24px 20px 20px;overflow-y:auto;background:var(--bg);
}
.narr-section{display:flex;flex-direction:column;gap:6px}
.narr-section-label{font-size:12px;font-weight:600;color:var(--text2)}
.narr-script-input{
  background:var(--surface2);border:1px solid var(--border);color:var(--text);
  border-radius:var(--r-s);padding:10px 12px;font-family:inherit;font-size:13px;
  outline:none;transition:border-color .15s,box-shadow .15s;resize:vertical;width:100%;
  min-height:160px;line-height:1.6;
}
.narr-script-input:focus{
  border-color:var(--coral);box-shadow:0 0 0 3px rgba(217,125,85,0.1);background:var(--surface)
}
.narr-row{display:flex;gap:10px;align-items:flex-end}

/* Hook clip selector */
.hook-empty{
  border:1.5px dashed var(--border2);border-radius:var(--r-l);
  padding:24px 16px;display:flex;flex-direction:column;align-items:center;
  gap:6px;cursor:pointer;transition:all .2s;text-align:center;
}
.hook-empty:hover{border-color:var(--coral);background:var(--coral-bg)}
.hook-empty-icon{font-size:28px;color:var(--text3)}
.hook-empty:hover .hook-empty-icon{color:var(--coral)}
.hook-empty-label{font-size:13px;font-weight:600;color:var(--text)}
.hook-empty-hint{font-size:11px;color:var(--text2);line-height:1.4}

.hook-selected{
  display:flex;gap:10px;align-items:flex-start;
  background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r-m);padding:12px;
}
.hook-thumb{
  width:48px;height:48px;border-radius:var(--r-s);background:var(--surface2);
  display:flex;align-items:center;justify-content:center;font-size:20px;
  flex-shrink:0;cursor:pointer;transition:background .15s;
}
.hook-thumb:hover{background:var(--coral-bg)}
.hook-info{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}
.hook-top{display:flex;align-items:center;gap:5px;flex-wrap:wrap}
.hook-caption-text{font-size:12px;color:var(--text);font-weight:500;line-height:1.3;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.hook-change{background:none;border:none;color:var(--coral);font-size:11px;
  cursor:pointer;padding:0;font-family:inherit;text-align:left;}

/* STEP 2 — Composer view */
.composer-view{
  width:100%;max-width:680px;
  padding:32px 24px 48px;
  display:flex;flex-direction:column;gap:14px;
  height:100%;overflow-y:auto;margin:0 auto;
}
.composer-view.hidden{display:none}

/* Clip strip */
.clip-strip{
  display:flex;align-items:center;gap:12px;
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r-l);
  padding:14px 16px;box-shadow:0 1px 4px rgba(0,0,0,0.04);
}
.clip-strip-thumb{
  width:52px;height:52px;border-radius:var(--r-s);background:var(--surface2);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  font-size:20px;gap:2px;cursor:pointer;transition:background .15s;flex-shrink:0;
}
.clip-strip-thumb:hover{background:var(--coral-bg)}
.strip-play{font-size:12px;color:var(--text3);line-height:1}
.clip-strip-thumb:hover .strip-play{color:var(--coral)}
.clip-strip-info{flex:1;min-width:0}
.strip-top{display:flex;align-items:center;gap:6px;margin-bottom:4px;flex-wrap:wrap}
.strip-ts{font-size:12px;color:var(--text2)}
.strip-dur{font-size:12px;background:var(--surface2);border:1px solid var(--border);
  padding:1px 7px;border-radius:var(--pill);color:var(--text2)}
.strip-visual{font-size:12px;color:var(--text2);line-height:1.4;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.strip-change{background:none;border:none;color:var(--text3);font-size:12px;
  cursor:pointer;padding:6px 10px;border-radius:var(--r-s);white-space:nowrap;flex-shrink:0;
  transition:all .15s}
.strip-change:hover{color:var(--coral);background:var(--coral-bg)}

/* Type toggle */
.type-toggle{display:flex;gap:6px;background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r-l);padding:10px 12px;box-shadow:0 1px 3px rgba(0,0,0,0.04)}
.type-btn{flex:1;background:var(--surface2);border:1px solid var(--border);
  color:var(--text2);border-radius:var(--r-s);padding:9px;font-size:13px;
  font-weight:500;cursor:pointer;transition:all .15s;text-align:center;font-family:inherit}
.type-btn:hover{border-color:var(--coral);color:var(--text)}
.type-btn.active{background:var(--coral);border-color:var(--coral);color:#fff;font-weight:600}

/* Form fields */
.compose-fields{background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r-l);padding:18px;display:flex;flex-direction:column;gap:14px;
  box-shadow:0 1px 3px rgba(0,0,0,0.04)}
.compose-fields.hidden{display:none}
.field-group{display:flex;flex-direction:column;gap:6px}
label{font-size:12px;font-weight:600;color:var(--text2)}
.hint{font-weight:400;color:var(--text3)}
textarea,input[type=text],select{
  background:var(--surface2);border:1px solid var(--border);color:var(--text);
  border-radius:var(--r-s);padding:9px 12px;font-family:inherit;font-size:13px;
  outline:none;transition:border-color .15s,box-shadow .15s;resize:vertical;width:100%}
textarea:focus,input[type=text]:focus,select:focus{
  border-color:var(--coral);box-shadow:0 0 0 3px rgba(217,125,85,0.1);background:var(--surface)}
textarea{min-height:72px}

.tts-row{display:flex;gap:10px;align-items:flex-end}
.tts-row .field-group{flex:1}
.audio-preview{background:var(--surface2);border:1px solid var(--border);
  border-radius:var(--r-s);padding:10px}
.audio-preview audio{width:100%}
.audio-dur{font-size:11px;color:var(--text2);margin-top:5px}
.cta-pill{background:var(--coral-bg);border:1px solid var(--coral-bd);
  border-radius:var(--r-s);padding:9px 13px;font-size:12px;color:var(--text2)}
.cta-pill strong{color:var(--coral)}

/* Render bar */
.render-bar{
  display:flex;gap:10px;background:var(--surface);border:1px solid var(--border);
  border-radius:var(--r-l);padding:12px 14px;box-shadow:0 1px 3px rgba(0,0,0,0.04);
  flex-shrink:0;
}
.output-input{flex:1;background:var(--surface2);border:1px solid var(--border);
  border-radius:var(--r-s);padding:9px 12px;font-size:13px;color:var(--text);outline:none}
.output-input:focus{border-color:var(--coral);box-shadow:0 0 0 3px rgba(217,125,85,0.1)}
.btn-render{padding:9px 24px;font-size:14px;font-weight:700}

/* ── QUEUE TAB ───────────────────────────────────────────────────── */
.queue-page{display:flex;flex-direction:column;height:100%;overflow-y:auto;padding:28px 24px;max-width:720px;margin:0 auto;width:100%}
.active-tasks{display:flex;flex-direction:column;gap:8px;margin-bottom:8px}
.section-title{font-size:12px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.6px;margin-bottom:14px}
.queue-active-section,.queue-history-section{margin-bottom:32px}
.queue-history{display:flex;flex-direction:column;gap:6px}

.task-card{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r-l);
  padding:14px 16px;box-shadow:0 1px 3px rgba(0,0,0,0.04);
}
.task-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.task-name{font-size:14px;font-weight:600;color:var(--text)}
.task-mode{font-size:11px;color:var(--text2);background:var(--surface2);
  padding:2px 8px;border-radius:var(--pill);border:1px solid var(--border)}
.task-steps{display:flex;gap:6px;margin-bottom:8px;flex-wrap:wrap}
.step-pill{font-size:11px;padding:3px 9px;border-radius:var(--pill);
  background:var(--surface2);color:var(--text3);border:1px solid var(--border)}
.step-pill.done{background:var(--green-bg);color:var(--green);border-color:#86EFAC;font-weight:600}
.step-pill.active{background:var(--coral-bg);color:var(--coral);border-color:var(--coral-bd);animation:pulse 1s infinite}
.task-bar{height:4px;background:var(--surface3);border-radius:2px;overflow:hidden}
.task-bar-fill{height:100%;background:var(--coral);transition:width .4s ease;border-radius:2px}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}

.job-row{
  display:flex;align-items:center;gap:12px;background:var(--surface);
  border:1px solid var(--border);border-radius:var(--r-m);padding:10px 14px;
}
.job-name{flex:1;font-size:13px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.job-meta{font-size:11px;color:var(--text2)}
.status-pill{font-size:11px;padding:3px 8px;border-radius:var(--pill);font-weight:600;white-space:nowrap}
.s-queued{background:var(--surface2);color:var(--text2)}
.s-rendering{background:var(--coral-bg);color:var(--coral)}
.s-review{background:#EFF6FF;color:var(--blue)}
.s-published{background:var(--green-bg);color:var(--green)}
.s-failed{background:var(--red-bg);color:var(--red)}

/* ── PUBLISHED TAB ───────────────────────────────────────────────── */
.published-page{height:100%;overflow-y:auto;padding:28px 24px;max-width:960px;margin:0 auto;width:100%}
.review-section{margin-bottom:32px}
.section-header-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.count-badge{display:inline-flex;align-items:center;justify-content:center;
  background:var(--coral);color:#fff;font-size:11px;font-weight:700;
  min-width:20px;height:20px;border-radius:var(--pill);padding:0 6px;margin-left:8px}
.daily-tracker{font-size:13px;color:var(--text2);font-weight:500}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px;margin-bottom:32px}

.video-card{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r-l);
  overflow:hidden;box-shadow:0 1px 4px rgba(0,0,0,0.06);transition:box-shadow .2s;
}
.video-card:hover{box-shadow:0 4px 14px rgba(0,0,0,0.1)}
.video-thumb{width:100%;aspect-ratio:9/16;max-height:200px;object-fit:cover;
  background:var(--surface2);cursor:pointer;display:block}
.video-thumb:hover{opacity:.9}
.video-card-body{padding:10px 12px}
.video-name{font-size:13px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:3px}
.video-meta{font-size:11px;color:var(--text2);margin-bottom:10px}
.video-actions{display:flex;gap:7px}

/* ── Shared Buttons ──────────────────────────────────────────────── */
.btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;
  border-radius:var(--r-s);border:none;font-family:inherit;font-size:13px;
  font-weight:500;cursor:pointer;transition:all .15s;white-space:nowrap}
.btn-primary{background:var(--coral);color:#fff;box-shadow:0 1px 4px rgba(217,125,85,0.3)}
.btn-primary:hover{background:var(--coral-h)}
.btn-primary:disabled{background:var(--text3);box-shadow:none;cursor:not-allowed}
.btn-secondary{background:var(--surface2);color:var(--text);border:1px solid var(--border)}
.btn-secondary:hover{background:var(--surface3)}
.btn-success{background:#16A34A;color:#fff}.btn-success:hover{background:#15803D}
.btn-danger{background:var(--red);color:#fff}.btn-danger:hover{background:#DC2626}
.btn-sm{padding:5px 10px;font-size:12px}

/* ── Modal ───────────────────────────────────────────────────────── */
.modal{position:fixed;inset:0;z-index:1000;display:flex;align-items:center;justify-content:center}
.modal.hidden{display:none}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.72)}
.modal-inner{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;gap:12px}
.modal-inner video{max-height:80vh;border-radius:var(--r-l);box-shadow:0 20px 60px rgba(0,0,0,0.5)}
.modal-close{position:absolute;top:-38px;right:0;background:none;border:none;
  color:#fff;font-size:22px;cursor:pointer;opacity:.8}.modal-close:hover{opacity:1}
.modal-actions{display:flex;gap:12px}.modal-actions.hidden{display:none}

/* ── Toasts ──────────────────────────────────────────────────────── */
#toast-container{position:fixed;bottom:24px;right:24px;z-index:2000;display:flex;flex-direction:column;gap:8px}
.toast{background:var(--surface);border:1px solid var(--border);border-radius:var(--r-l);
  padding:10px 16px;font-size:13px;color:var(--text);
  box-shadow:0 8px 24px rgba(0,0,0,0.1);animation:slideIn .2s ease;
  display:flex;align-items:center;gap:8px;min-width:220px}
.toast.success{border-left:3px solid var(--green)}
.toast.error{border-left:3px solid var(--red)}
.toast.info{border-left:3px solid var(--coral)}
@keyframes slideIn{from{transform:translateX(20px);opacity:0}to{transform:translateX(0);opacity:1}}
.spinner{display:inline-block;width:12px;height:12px;border:2px solid rgba(0,0,0,.1);
  border-top-color:var(--coral);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.empty-state{color:var(--text3);text-align:center;padding:40px 20px;font-size:13px;grid-column:1/-1}
.loading-state{color:var(--text2);text-align:center;padding:40px;font-size:13px;grid-column:1/-1}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--surface3);border-radius:2px}
